!function(H,G){"use strict";var q="ht",U=q+".graph.",c=H[q],B=c.graph,Q=c.Default,d=c.Color,t=null,M="px",p=Q.getInternal(),F=p.getPinchDist,o=Q.preventDefault,Z=Q.getTouchCount,K=Q.startDragging;p.addMethod(Q,{overviewBackground:d.widgetBackground,overviewMaskBackground:d.transparent,overviewContentBorderColor:d.widgetBorder,overviewContentBackground:d.background},!0),B.Overview=function(F){var k=this,L=k._view=p.createView(1,k);k._canvas=p.createCanvas(L),L.style.background=Q.overviewBackground,L.appendChild(k._mask=p.createDiv()),k.setGraphView(F),k.addListeners()},Q.def(U+"Overview",G,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:Q.overviewMaskBackground,_contentBorderColor:Q.overviewContentBorderColor,_contentBackground:Q.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(S){var y=this;if(y.gv!==S){var f=y.gv;y.gv=S,f&&(f.removeViewListener(y.handleGraphViewChanged,y),f.ump(y.handleGraphViewPropertyChanged,y)),S&&(S.addViewListener(y.handleGraphViewChanged,y),S.mp(y.handleGraphViewPropertyChanged,y)),y.fp("graphView",f,S),y.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(N){this._autoUpdate&&"validate"===N.kind&&this.redraw()},handleGraphViewPropertyChanged:function(i){("canvasBackground"===i.property||this.getFixToRect()&&("zoom"===i.property||"translateX"===i.property||"translateY"===i.property))&&this.redraw()},redraw:function(){var y=this;y._redraw||(y._redraw=1,y.iv(50))},validateImpl:function(){var q=this,f=q.gv,W=q._canvas,J=q.getWidth(),C=q.getHeight(),d=q._redraw;if(f){var s=q._mask,n=s.style,K=f.getViewRect(),z=this.getFixToRect(),g=z?"boolean"==typeof z?f.getContentRect():z:f.getScrollRect(),x=g.x,F=g.y,O=g.width,G=g.height,u=q._rate=Math.max(O/J,G/C),P=q._x=(J-O/u)/2,I=q._y=(C-G/u)/2;if(0!==K.width&&0!==K.height||q.hasRetry||(Q.callLater(q.iv,q,t),q.hasRetry=!0),(J!==W.clientWidth||C!==W.clientHeight)&&(p.setCanvas(W,J,C),d=1),p.isSameRect(g,q._scrollRect)||(q._scrollRect=g,d=1),d){var T=p.initContext(W),w=f.getDataModel(),N=w.getBackground()||q._contentBackground,o=q._contentBorderColor,v=Q.devicePixelRatio;T.clearRect(0,0,J*v,C*v);var R=w.getBackground()&&w.a("width")>0&&w.a("height")>0;N&&!R&&p.fillRect(T,P*v,I*v,O/u*v,G/u*v,N),p.translateAndScale(T,-x/u+P,-F/u+I,1/u),f._42(T),T.restore(),o&&p.drawBorder(T,o,P*v,I*v,O/u*v,G/u*v)}n.background=q._maskBackground,n.left=P+(K.x-x)/u+M,n.top=I+(K.y-F)/u+M,n.width=K.width/u+M,n.height=K.height/u+M,q._redraw=null}else if(d){var T=p.initContext(W);T.clearRect(0,0,J,C),T.restore(),q._redraw=null}},center:function(T){var O=this,c=O.gv;if(c){var l=c._zoom,z=c._29I,H=O._rate,B=O._scrollRect,Z=Q.getLogicalPoint(T,O._canvas),g=B.x+(Z.x-O._x)*H,h=B.y+(Z.y-O._y)*H;c.setTranslate((z.width/2-g)*l,(z.height/2-h)*l)}},handle_mousedown:function(j){this.handle_touchstart(j)},handleWindowMouseUp:function(l){this.handleWindowTouchEnd(l)},handleWindowMouseMove:function(s){this.handleWindowTouchMove(s)},handle_mousewheel:function(o){this.handleScroll(o,o.wheelDelta)},handle_DOMMouseScroll:function(r){2===r.axis&&this.handleScroll(r,-r.detail)},handleScroll:function(s,m){if(o(s),this.gv){var v=this.gv;m>0?v.scrollZoomIn():0>m&&v.scrollZoomOut()}},handle_touchstart:function(m){if(o(m),this.gv&&Q.isLeftButton(m)){var W=this,_=W.gv,s=Z(m);1===s?Q.isDoubleClick(m)&&_.isResettable()?_.reset():(W.center(m),K(W,m)):2===s&&(W._dist=F(m),K(W,m))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(M){if(this.gv){var Q=this,g=Q._dist,D=Z(M);1===D?Q.center(M):2===D&&g!=t&&Q.gv.handlePinch(t,F(M),g)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);